Профайлинг (определяет количество запусков и время исполнения функций)

import fileinput
import cProfile

pr = cProfile.Profile()
pr.enable()
main_topology(5, ["envelope",  "hall", "room", "bath", "kitchen"])
pr.disable()
pr.print_stats(sort='time')

тут описание - https://habrahabr.ru/company/mailru/blog/202832/

На самом деле поломать программу в процессе рефакторинга или оптимизации легче простого, и каждый цикл профилирования и 
переписывания кода должен в обязательном порядке сопровождаться тестированием функционала (как непосредственно затронутого 
изменениями, так и всего остального, ведь сайд-эффекты такие сайд-эффекты). Попробуем исправиться и добавим тесты в нашу программу.
Самый простой и подходящий для такого простого скрипта вариант — использовать модуль doctest.


Тесты можно содержать в самом теле функции или в отдельном файле. 
http://pythontesting.net/framework/doctest/doctest-introduction/

Пример кода (обрати внимание на кавычки - они должны быть точно такими)
def multiply(a, b):
    """
    >>> multiply(4, 3)
    12
    >>> multiply('a', 3)
    'aaa'
    """
    return a * b

Для применения тестов можно запустить в командной строке
python -m doctest -v script_name.py

или добавить в скрипт и запустить скрипт
if __name__ == "__main__":
    import doctest
    doctest.testmod()
